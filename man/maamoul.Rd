% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/maamoul.R
\name{maamoul}
\alias{maamoul}
\title{MAAMOUL: A method for detecting microbiome-metabolome alterations in disease
  using metabolic networks}
\usage{
maamoul(
  global_network_edges,
  ec_pvals,
  metabolite_pvals,
  out_dir,
  SEED = 710,
  NODE_FDR_THRESHOLD = 0.1,
  N_REPEATS = 1000,
  MAX_DIST_BTWN_REDS = 4,
  HCLUST_METHOD = "average",
  CUTREE_H = 0.8,
  MIN_MOD_SIZE = 3,
  MIN_ECS_IN_MOD = 0,
  MIN_METS_IN_MOD = 0,
  N_VAL_PERM = 99,
  MODULE_FDR_THRESHOLD = 0.2,
  N_THREADS = 1
)
}
\arguments{
\item{global_network_edges}{A path to a file holding the list of edges to be
included in the global metabolic network. The file should be comma-
delimited, with the first column listing EC's and the second column listing
metabolites. Additional columns, if exits, will be ignored. Each row in the
table indicates an edge between the EC and the metabolite.}

\item{ec_pvals}{A path to a file holding all metagenomic EC features and
their corresponding p-values representing their association with disease.
These do not have to be FDR corrected. The file should be tab-delimited,
with a column named 'feature' holding EC codes in the same format as in
the global network file, and a 'pval' column holding the p-values. Other
columns will be ignored.}

\item{metabolite_pvals}{Similar to the `ec_pvals` file, but listing
metabolite p-values. Metabolite codes/names should be in the same format
as in the global network file.}

\item{out_dir}{A folder in which all output files will be saved.}

\item{SEED}{An integer to be used as a seed for result reproducibility.}

\item{NODE_FDR_THRESHOLD}{The FDR threshold to determine which nodes should
be treated as 'anchors' (i.e. estimated to be disease-associated).
Default: 0.1.}

\item{N_REPEATS}{The number of random coloring of nodes to perform.}

\item{MAX_DIST_BTWN_REDS}{A maximal distance between nodes for them to be
considered as taking part in the same disease-associated module.
Default: 4.}

\item{HCLUST_METHOD}{Either 'average', 'single' or 'complete'. Default:
'average'. See `?hclust`.}

\item{CUTREE_H}{The height at which the hierarchical tree is cut to determine
clusters.}

\item{MIN_MOD_SIZE}{The minimal size of a module to be outputted. Default: 3.}

\item{MIN_ECS_IN_MOD}{Modules with less than this number of EC nodes will be
discarded. Default: 0.}

\item{MIN_METS_IN_MOD}{Modules with less than this number of metabolite nodes
will be discarded. Default: 0.}

\item{N_VAL_PERM}{Number of node-weight permutations to perform for
calculating the significance of each module.}

\item{MODULE_FDR_THRESHOLD}{The FDR threshold to determine which modules are
significant.}

\item{N_THREADS}{Number of threads to use for parallel computing. Verify a
sufficient number of cores with `parallel::detectCores()` first.}
}
\value{
The method outputs several tables and plots to the `out_dir` folder.
}
\description{
MAAMOUL is a knowledge-based computational method that integrates metagenomic
  and metabolomic data to identify custom data-driven microbial metabolic
  modules associated with disease states. Unlike traditional statistical
  approaches, MAAMOUL leverages prior biological knowledge about bacterial
  metabolism to link genes to metabolites through a global, microbiome-wide
  metabolic network, and then projects genes' and metabolites' disease-
  association scores onto this network. The identified 'modules' are
  sub-networks in this graph that are significantly enriched with disease-
  associated features, both metagenomic and metabolomic.
}
\examples{
write_test_files()
maamoul(
  global_network_edges = 'test_input/enzyme_compound_edges_kegg.csv',
  ec_pvals = 'test_input/ec_pvals.tsv',
  metabolite_pvals = 'test_input/mtb_pvals.tsv',
  out_dir = 'test_outputs',
  N_REPEATS = 100,
  N_VAL_PERM = 9,
  N_THREADS = 4
  )
}
